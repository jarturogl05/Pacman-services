ˆ
\C:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\DBOperationResult.cs
	namespace 	
Pacman_Sevices
 
{ 
public 

class 
DBOperationResult "
{ 
public 
enum 
	AddResult 
{ 	
Success 
, 

NullObject		 
,		 

UnknowFail

 
,

 
ExistingRecord 
} 	
} 
} á
WC:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\IChatService.cs
	namespace 	
Pacman_Sevices
 
{ 
[ 
ServiceContract 
( 
CallbackContract %
=& '
typeof( .
(. /
IServerChatCallback/ B
)B C
)C D
]D E
public 

	interface 
IChatService !
{		 
[

 	
OperationContract

	 
]

 
int 
Connect 
( 
String 
name 
)  
;  !
[ 	
OperationContract	 
] 
void 

Disconnect 
( 
int 
id 
) 
;  
[ 	
OperationContract	 
( 
IsOneWay #
=$ %
true& *
)* +
]+ ,
void 
SendMsg 
( 
String 
message #
,# $
int% (
id) +
)+ ,
;, -
} 
public 

	interface 
IServerChatCallback (
{ 
[ 	
OperationContract	 
( 
IsOneWay #
=$ %
true& *
)* +
]+ ,
void 
MsgCallback 
( 
String 
message  '
)' (
;( )
} 
} ⁄
`C:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\IConfirmationServices.cs
	namespace 	
Pacman_Sevices
 
{ 
[		 
ServiceContract		 
]		 
public

 

	interface

 !
IConfirmationServices

 *
{ 
[ 	
OperationContract	 
] 
int 
	SendEmail 
( 
Jugador 
jugador %
)% &
;& '
[ 	
OperationContract	 
] 
int 
GenerateNewCode 
( 
Jugador #
jugador$ +
)+ ,
;, -
[ 	
OperationContract	 
] 
int $
ChangeConfirmationStatus $
($ %
Jugador% ,
jugador- 4
)4 5
;5 6
[ 	
DataContract	 
] 
public 
class 
Jugador 
{ 	
private 
String 
email  
;  !
private 
Usuario 
usuario #
;# $
private 
String 
c√≥digo !
;! "
[ 

DataMember 
] 
public 
String 
Correo  
{! "
get# &
{' (
return) /
email0 5
;5 6
}7 8
set9 <
{= >
email? D
=E F
valueG L
;L M
}N O
}P Q
[ 

DataMember 
] 
public   
Usuario   
Usuario   "
{  # $
get  % (
{  ) *
return  + 1
usuario  2 9
;  9 :
}  ; <
set  = @
{  A B
usuario  C J
=  K L
value  M R
;  R S
}  T U
}  V W
["" 

DataMember"" 
]"" 
public## 
String## 
C√≥digo##  
{##! "
get### &
{##' (
return##) /
c√≥digo##0 6
;##6 7
}##8 9
set##: =
{##> ?
c√≥digo##@ F
=##G H
value##I N
;##N O
}##P Q
}##R S
}%% 	
}(( 	
}** ë
XC:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\ILoginService.cs
	namespace 	
Pacman_Sevices
 
{ 
[ 
ServiceContract 
] 
public		 

	interface		 
ILoginService		 "
{

 
[ 	
OperationContract	 
] 
int 
ValidateUser 
( 
Usuario  
usuario! (
)( )
;) *
[ 	
DataContract	 
] 
public 
class 
Usuario 
{ 	
private 
String 
username #
;# $
private 
String 
password #
;# $
[ 

DataMember 
] 
public 
String 
Username "
{# $
get% (
{) *
return+ 1
username2 :
;: ;
}< =
set> A
{B C
usernameD L
=M N
valueO T
;T U
}V W
}X Y
[ 

DataMember 
] 
public 
String 
Password "
{# $
get% (
{) *
return+ 1
password2 :
;: ;
}< =
set> A
{B C
passwordD L
=M N
valueO T
;T U
}V W
}X Y
} 	
} 
} È
[C:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\IRegisterService.cs
	namespace 	
Pacman_Sevices
 
{ 
[ 
ServiceContract 
] 
public		 

	interface		 
IRegisterService		 %
{

 
[ 	
OperationContract	 
] 
DBOperationResult 
. 
	AddResult #
AddUser$ +
(+ ,
Jugador, 3
jugador4 ;
); <
;< =
[ 	
DataContract	 
] 
public 
class 
Jugador 
{ 	
private 
String 
nombre !
;! "
private 
String 
username #
;# $
private 
String 
email  
;  !
private 
String 
password #
;# $
private 
string 
c√≥digo !
;! "
[ 

DataMember 
] 
public 
String 
Nombre  
{! "
get# &
{' (
return) /
nombre0 6
;6 7
}8 9
set: =
{> ?
nombre@ F
=G H
valueI N
;N O
}P Q
}R S
[ 

DataMember 
] 
public 
String 
Username "
{# $
get% (
{) *
return+ 1
username2 :
;: ;
}< =
set> A
{B C
usernameD L
=M N
valueO T
;T U
}V W
}X Y
[ 

DataMember 
] 
public 
String 
Correo  
{! "
get# &
{' (
return) /
email0 5
;5 6
}7 8
set9 <
{= >
email? D
=E F
valueG L
;L M
}N O
}P Q
[   

DataMember   
]   
public!! 
String!! 
Password!! "
{!!# $
get!!% (
{!!) *
return!!+ 1
password!!2 :
;!!: ;
}!!< =
set!!> A
{!!B C
password!!D L
=!!M N
value!!O T
;!!T U
}!!V W
}!!X Y
[## 

DataMember## 
]## 
public$$ 
String$$ 
C√≥digo$$  
{$$! "
get$$# &
{$$' (
return$$) /
c√≥digo$$0 6
;$$6 7
}$$8 9
set$$: =
{$$> ?
c√≥digo$$@ F
=$$G H
value$$I N
;$$N O
}$$P Q
}$$R S
}&& 	
}'' 
}(( ˝
XC:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\IScoreService.cs
	namespace 	
Pacman_Sevices
 
{ 
[		 
ServiceContract		 
]		 
public

 

	interface

 
IScoreService

 "
{ 
[ 	
OperationContract	 
] 
bool 
SetScore 
( 
User 
user 
,  
double! '
score( -
)- .
;. /
[ 	
OperationContract	 
] 
Double 
GetScore 
( 
User 
user !
)! "
;" #
[ 	
DataContract	 
] 
public 
class 
User 
{ 	
private 
String 
username #
;# $
private 
Double 
puntuaci√≥n %
;% &
[ 

DataMember 
] 
public 
String 
Nombre  
{! "
get# &
{' (
return) /
username0 8
;8 9
}: ;
set< ?
{@ A
usernameB J
=K L
valueM R
;R S
}T U
}V W
[   

DataMember   
]   
public!! 
Double!! 
Puntuaci√≥n!! $
{!!% &
get!!' *
{!!+ ,
return!!- 3
puntuaci√≥n!!4 >
;!!> ?
}!!@ A
set!!B E
{!!F G
puntuaci√≥n!!H R
=!!S T
value!!U Z
;!!Z [
}!!\ ]
}!!^ _
}$$ 	
}'' 
}(( ç
bC:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str )
)) *
]* +
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str +
)+ ,
], -
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *ÿ
UC:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\ServerUser.cs
	namespace 	
Pacman_Sevices
 
{ 
public 

class 

ServerUser 
{ 
public		 
int		 
ID		 
{		 
get		 
;		 
set		  
;		  !
}		" #
public

 
String

 
Name

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public 
OperationContext 
operationContext  0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
} 
} à¨
SC:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\Services.cs
	namespace

 	
Pacman_Sevices


 
{ 
[ 
ServiceBehavior 
( 
InstanceContextMode (
=) *
InstanceContextMode+ >
.> ?
Single? E
)E F
]F G
public 

partial 
class 
Services !
:" #
IChatService$ 0
{ 
List 
< 

ServerUser 
> 
users 
=  
new! $
List% )
<) *

ServerUser* 4
>4 5
(5 6
)6 7
;7 8
int 
nextId 
= 
$num 
; 
public 
int 
Connect 
( 
String !
name" &
)& '
{ 	

ServerUser 
user 
= 
new !

ServerUser" ,
(, -
)- .
{ 
ID 
= 
nextId 
, 
Name 
= 
name 
, 
operationContext  
=! "
OperationContext# 3
.3 4
Current4 ;
} 
; 
nextId 
++ 
; 
Console 
. 
	WriteLine 
( 
$str '
+( )
user* .
.. /
ID/ 1
+2 3
$str4 E
+E F
userG K
.K L
NameL P
)P Q
;Q R
users 
. 
Add 
( 
user 
) 
; 
return 
user 
. 
ID 
; 
} 	
public 
void 

Disconnect 
( 
int "
id# %
)% &
{ 	
var   
user   
=   
users   
.   
FirstOrDefault   +
(  + ,
i  , -
=>  . 0
i  1 2
.  2 3
ID  3 5
==  6 8
id  9 ;
)  ; <
;  < =
if!! 
(!! 
user!! 
!=!! 
null!! 
)!! 
{"" 
users## 
.## 
Remove## 
(## 
user## !
)##! "
;##" #
SendMsg$$ 
($$ 
$str$$ 
+$$ 
user$$ #
.$$# $
Name$$$ (
+$$) *
$str$$+ E
,$$E F
$num$$G H
)$$H I
;$$I J
}%% 
}&& 	
public'' 
void'' 
SendMsg'' 
('' 
String'' "
message''# *
,''* +
int'', /
id''0 2
)''2 3
{(( 	
foreach)) 
()) 
var)) 
item)) 
in))  
users))! &
)))& '
{** 
string++ 
answer++ 
=++ 
DateTime++  (
.++( )
Now++) ,
.++, -
ToShortTimeString++- >
(++> ?
)++? @
;++@ A
var,, 
user,, 
=,, 
users,,  
.,,  !
FirstOrDefault,,! /
(,,/ 0
i,,0 1
=>,,2 4
i,,5 6
.,,6 7
ID,,7 9
==,,: <
id,,= ?
),,? @
;,,@ A
if-- 
(-- 
user-- 
!=-- 
null--  
)--  !
{.. 
answer// 
+=// 
$str// "
+//# $
user//% )
.//) *
Name//* .
+/// 0
$str//1 4
;//4 5
}00 
answer11 
+=11 
message11 !
;11! "
try22 
{33 
item44 
.44 
operationContext44 )
.44) *
GetCallbackChannel44* <
<44< =
IServerChatCallback44= P
>44P Q
(44Q R
)44R S
.44S T
MsgCallback44T _
(44_ `
answer44` f
)44f g
;44g h
}55 
catch66 
(66 
	Exception66  
)66  !
{77 
throw88 
new88 #
NotImplementedException88 5
(885 6
)886 7
;887 8
}99 
}:: 
};; 	
}<< 
public== 

partial== 
class== 
Services== !
:==" #
IRegisterService==$ 4
{>> 
private?? 
DBOperationResult?? !
.??! "
	AddResult??" +
CheckObjectJugador??, >
(??> ?
IRegisterService??? O
.??O P
Jugador??P W
jugador??X _
)??_ `
{@@ 	
ValidarCamposAA 
validarCamposAA '
=AA( )
newAA* -
ValidarCamposAA. ;
(AA; <
)AA< =
;AA= >
DBOperationResultBB 
.BB 
	AddResultBB '
resultBB( .
=BB/ 0
DBOperationResultBB1 B
.BBB C
	AddResultBBC L
.BBL M

UnknowFailBBM W
;BBW X
ifCC 
(CC 
jugadorCC 
.CC 
CorreoCC 
==CC  
stringCC! '
.CC' (
EmptyCC( -
||CC. 0
jugadorCC1 8
.CC8 9
NombreCC9 ?
==CC@ B
stringCCC I
.CCI J
EmptyCCJ O
||CCP R
jugadorCCS Z
.CCZ [
PasswordCC[ c
==CCd f
stringCCg m
.CCm n
EmptyCCn s
||CCt v
jugadorCCw ~
.CC~ 
Username	CC á
==
CCà ä
string
CCã ë
.
CCë í
Empty
CCí ó
)
CCó ò
{DD 
throwEE 
newEE 
FormatExceptionEE )
(EE) *
$strEE* J
)EEJ K
;EEK L
}FF 
elseGG 
ifGG 
(GG 
validarCamposGG !
.GG! "
ValidarCorreoGG" /
(GG/ 0
jugadorGG0 7
.GG7 8
CorreoGG8 >
)GG> ?
==GG@ B
ValidarCamposGGC P
.GGP Q!
ResultadosValidaci√≥nGGQ e
.GGe f
Correoinv√°lidoGGf t
)GGt u
{HH 
throwII 
newII 
FormatExceptionII )
(II) *
$strII* P
+IIQ R
jugadorIIS Z
.IIZ [
CorreoII[ a
)IIa b
;IIb c
}JJ 
elseKK 
{LL 
resultMM 
=MM 
DBOperationResultMM *
.MM* +
	AddResultMM+ 4
.MM4 5
SuccessMM5 <
;MM< =
}NN 
returnPP 
resultPP 
;PP 
}QQ 	
publicSS 
DBOperationResultSS  
.SS  !
	AddResultSS! *
AddUserSS+ 2
(SS2 3
IRegisterServiceSS3 C
.SSC D
JugadorSSD K
jugadorSSL S
)SSS T
{TT 	
DBOperationResultUU 
.UU 
	AddResultUU '
resultUU( .
=UU/ 0
DBOperationResultUU1 B
.UUB C
	AddResultUUC L
.UUL M

UnknowFailUUM W
;UUW X
DBOperationResultVV 
.VV 
	AddResultVV '
checkForEmptyVV( 5
=VV6 7
DBOperationResultVV8 I
.VVI J
	AddResultVVJ S
.VVS T

NullObjectVVT ^
;VV^ _
tryWW 
{XX 
checkForEmptyYY 
=YY 
CheckObjectJugadorYY  2
(YY2 3
jugadorYY3 :
)YY: ;
;YY; <
}ZZ 
catch[[ 
([[ 
FormatException[[ "
)[[" #
{\\ 
result]] 
=]] 
DBOperationResult]] *
.]]* +
	AddResult]]+ 4
.]]4 5

NullObject]]5 ?
;]]? @
return^^ 
result^^ 
;^^ 
}__ 

DataAccessaa 
.aa 
ModelContaineraa %
	containeraa& /
=aa0 1
newaa2 5
ModelContaineraa6 D
(aaD E
)aaE F
;aaF G
ICollectionbb 
<bb 
Jugadorbb 
>bb  
usuariosbb! )
=bb* +
newbb, /
Listbb0 4
<bb4 5
Jugadorbb5 <
>bb< =
{cc 
newdd 
Jugadordd 
{dd 
Nombreee 
=ee 
jugadoree  
.ee  !
Nombreee! '
,ee' (
Correoff 
=ff 
jugadorff  
.ff  !
Correoff! '
,ff' (
Elogg 
=gg 
$strgg 
,gg 
Puntuaci√≥nAltahh 
=hh  
$strhh! #
,hh# $
Puntuaci√≥nii 
=ii 
$strii 
,ii  
PantallasGanadasjj  
=jj! "
$strjj# %
,jj% &
Rankingll 
=ll 
newll 
Rankingll %
{mm 
Posicionnn 
=nn 
$strnn "
}oo 
,oo 
Usuariopp 
=pp 
newpp 
Usuariopp %
{pp% &
Usernameqq  
=qq! "
jugadorqq# *
.qq* +
Usernameqq+ 3
,qq3 4
Passwordrr  
=rr! "
PassHashrr# +
(rr+ ,
jugadorrr, 3
.rr3 4
Passwordrr4 <
)rr< =
,rr= >
Confirmaci√≥nss $
=ss% &
$strss' .
,ss. /
C√≥digott 
=tt  
jugadortt! (
.tt( )
C√≥digott) /
}uu 
}vv 
,vv 
}xx 
;xx 
foreachzz 
(zz 
varzz 
usuariozz  
inzz! #
usuarioszz$ ,
)zz, -
{{{ 
	container|| 
.|| 

JugadorSet|| $
.||$ %
Add||% (
(||( )
usuario||) 0
)||0 1
;||1 2
}}} 
	container~~ 
.~~ 
SaveChanges~~ !
(~~! "
)~~" #
;~~# $
result 
= 
DBOperationResult &
.& '
	AddResult' 0
.0 1
Success1 8
;8 9
return
ÅÅ 
result
ÅÅ 
;
ÅÅ 
}
ÇÇ 	
private
áá 
String
áá 
PassHash
áá 
(
áá  
String
áá  &
data
áá' +
)
áá+ ,
{
àà 	
SHA1
ââ 
sha
ââ 
=
ââ 
SHA1
ââ 
.
ââ 
Create
ââ "
(
ââ" #
)
ââ# $
;
ââ$ %
byte
ää 
[
ää 
]
ää 
hashData
ää 
=
ää 
sha
ää !
.
ää! "
ComputeHash
ää" -
(
ää- .
Encoding
ää. 6
.
ää6 7
Default
ää7 >
.
ää> ?
GetBytes
ää? G
(
ääG H
data
ääH L
)
ääL M
)
ääM N
;
ääN O
StringBuilder
ãã  
stringBuilderValue
ãã ,
=
ãã- .
new
ãã/ 2
StringBuilder
ãã3 @
(
ãã@ A
)
ããA B
;
ããB C
for
çç 
(
çç 
int
çç 
i
çç 
=
çç 
$num
çç 
;
çç 
i
çç 
<
çç 
hashData
çç  (
.
çç( )
Length
çç) /
;
çç/ 0
i
çç1 2
++
çç2 4
)
çç4 5
{
éé  
stringBuilderValue
èè "
.
èè" #
Append
èè# )
(
èè) *
hashData
èè* 2
[
èè2 3
i
èè3 4
]
èè4 5
.
èè5 6
ToString
èè6 >
(
èè> ?
)
èè? @
)
èè@ A
;
èèA B
}
êê 
return
ëë  
stringBuilderValue
ëë %
.
ëë% &
ToString
ëë& .
(
ëë. /
)
ëë/ 0
;
ëë0 1
}
íí 	
}
ïï 
public
ññ 

partial
ññ 
class
ññ 
Services
ññ !
:
ññ" #
ILoginService
ññ$ 1
{
óó 
public
òò 
int
òò 
ValidateUser
òò 
(
òò  
ILoginService
òò  -
.
òò- .
Usuario
òò. 5
usuario
òò6 =
)
òò= >
{
ôô 	
ModelContainer
öö 
	container
öö $
=
öö% &
new
öö' *
ModelContainer
öö+ 9
(
öö9 :
)
öö: ;
;
öö; <
foreach
õõ 
(
õõ 
var
õõ 
Usuario
õõ  
in
õõ! #
	container
õõ$ -
.
õõ- .

UsuarioSet
õõ. 8
)
õõ8 9
{
úú 
if
ùù 
(
ùù 
Usuario
ùù 
.
ùù 
Username
ùù $
==
ùù% '
usuario
ùù( /
.
ùù/ 0
Username
ùù0 8
&&
ùù9 ;
Usuario
ùù< C
.
ùùC D
Password
ùùD L
==
ùùM O
PassHash
ùùP X
(
ùùX Y
usuario
ùùY `
.
ùù` a
Password
ùùa i
)
ùùi j
)
ùùj k
{
ûû 
return
üü 
$num
üü 
;
üü 
}
†† 
}
°° 
return
¢¢ 
$num
¢¢ 
;
¢¢ 
}
££ 	
}
§§ 
public
¶¶ 

partial
¶¶ 
class
¶¶ 
Services
¶¶ !
:
¶¶" ##
IConfirmationServices
¶¶$ 9
{
ßß 
public
®® 
int
®® &
ChangeConfirmationStatus
®® +
(
®®+ ,#
IConfirmationServices
®®, A
.
®®A B
Jugador
®®B I
jugador
®®J Q
)
®®Q R
{
©© 	
int
´´ 
	resultado
´´ 
=
´´ 
$num
´´ 
;
´´ 
using
¨¨ 
(
¨¨ 
var
¨¨ 
context
¨¨ 
=
¨¨  
new
¨¨! $
ModelContainer
¨¨% 3
(
¨¨3 4
)
¨¨4 5
)
¨¨5 6
{
≠≠ 
var
ØØ 
jgd
ØØ 
=
ØØ 
context
ØØ !
.
ØØ! "

JugadorSet
ØØ" ,
.
∞∞  !
Where
∞∞! &
(
∞∞& '
b
∞∞' (
=>
∞∞) +
b
∞∞, -
.
∞∞- .
Correo
∞∞. 4
==
∞∞5 7
jugador
∞∞8 ?
.
∞∞? @
Correo
∞∞@ F
)
∞∞F G
.
±±  !
FirstOrDefault
±±! /
(
±±/ 0
)
±±0 1
;
±±1 2
if
≥≥ 
(
≥≥ 
jgd
≥≥ 
.
≥≥ 
Usuario
≥≥ 
.
≥≥  
C√≥digo
≥≥  &
==
≥≥' )
jugador
≥≥* 1
.
≥≥1 2
C√≥digo
≥≥2 8
)
≥≥8 9
{
¥¥ 
jgd
µµ 
.
µµ 
Usuario
µµ 
.
µµ  
Confirmaci√≥n
µµ  ,
=
µµ- .
$str
µµ/ 5
;
µµ5 6
context
∂∂ 
.
∂∂ 

UsuarioSet
∂∂ &
.
∂∂& '
Attach
∂∂' -
(
∂∂- .
jgd
∂∂. 1
.
∂∂1 2
Usuario
∂∂2 9
)
∂∂9 :
;
∂∂: ;
context
∑∑ 
.
∑∑ 
Entry
∑∑ !
(
∑∑! "
jgd
∑∑" %
.
∑∑% &
Usuario
∑∑& -
)
∑∑- .
.
∑∑. /
Property
∑∑/ 7
(
∑∑7 8
$str
∑∑8 F
)
∑∑F G
.
∑∑G H

IsModified
∑∑H R
=
∑∑S T
true
∑∑U Y
;
∑∑Y Z
context
∏∏ 
.
∏∏ 
SaveChanges
∏∏ '
(
∏∏' (
)
∏∏( )
;
∏∏) *
	resultado
ππ 
=
ππ 
$num
ππ  !
;
ππ! "
}
∫∫ 
}
ΩΩ 
return
¿¿ 
	resultado
¿¿ 
;
¿¿ 
}
¡¡ 	
public
√√ 
int
√√ 
GenerateNewCode
√√ "
(
√√" ##
IConfirmationServices
√√# 8
.
√√8 9
Jugador
√√9 @
jugador
√√A H
)
√√H I
{
ƒƒ 	
using
≈≈ 
(
≈≈ 
var
≈≈ 
context
≈≈ 
=
≈≈  
new
≈≈! $
ModelContainer
≈≈% 3
(
≈≈3 4
)
≈≈4 5
)
≈≈5 6
{
∆∆ 
var
«« 
jgd
«« 
=
«« 
context
«« !
.
««! "

JugadorSet
««" ,
.
»»  !
Where
»»! &
(
»»& '
b
»»' (
=>
»») +
b
»», -
.
»»- .
Correo
»». 4
==
»»5 7
jugador
»»8 ?
.
»»? @
Correo
»»@ F
)
»»F G
.
……  !
FirstOrDefault
……! /
(
……/ 0
)
……0 1
;
……1 2
Console
ÃÃ 
.
ÃÃ 
	WriteLine
ÃÃ !
(
ÃÃ! "
jgd
ÃÃ" %
.
ÃÃ% &
Usuario
ÃÃ& -
.
ÃÃ- .
C√≥digo
ÃÃ. 4
)
ÃÃ4 5
;
ÃÃ5 6
Random
ŒŒ 
random
ŒŒ 
=
ŒŒ 
new
ŒŒ  #
Random
ŒŒ$ *
(
ŒŒ* +
)
ŒŒ+ ,
;
ŒŒ, -
jgd
œœ 
.
œœ 
Usuario
œœ 
.
œœ 
C√≥digo
œœ "
=
œœ# $
random
œœ% +
.
œœ+ ,
Next
œœ, 0
(
œœ0 1
$num
œœ1 2
,
œœ2 3
$num
œœ4 :
)
œœ: ;
.
œœ; <
ToString
œœ< D
(
œœD E
)
œœE F
;
œœF G
context
—— 
.
—— 

UsuarioSet
—— "
.
——" #
Attach
——# )
(
——) *
jgd
——* -
.
——- .
Usuario
——. 5
)
——5 6
;
——6 7
context
““ 
.
““ 
Entry
““ 
(
““ 
jgd
““ !
.
““! "
Usuario
““" )
)
““) *
.
““* +
Property
““+ 3
(
““3 4
$str
““4 <
)
““< =
.
““= >

IsModified
““> H
=
““I J
true
““K O
;
““O P
context
”” 
.
”” 
SaveChanges
”” #
(
””# $
)
””$ %
;
””% &
jugador
‘‘ 
.
‘‘ 
C√≥digo
‘‘ 
=
‘‘  
jgd
‘‘! $
.
‘‘$ %
Usuario
‘‘% ,
.
‘‘, -
C√≥digo
‘‘- 3
;
‘‘3 4
	SendEmail
’’ 
(
’’ 
jugador
’’ !
)
’’! "
;
’’" #
}
÷÷ 
return
ÿÿ 
$num
ÿÿ 
;
ÿÿ 
}
ŸŸ 	
public
›› 
int
›› 
	SendEmail
›› 
(
›› #
IConfirmationServices
›› 2
.
››2 3
Jugador
››3 :
jugador
››; B
)
››B C
{
ﬁﬁ 	
System
‡‡ 
.
‡‡ 
Net
‡‡ 
.
‡‡ 
Mail
‡‡ 
.
‡‡ 
MailMessage
‡‡ '
msg
‡‡( +
=
‡‡, -
new
‡‡. 1
System
‡‡2 8
.
‡‡8 9
Net
‡‡9 <
.
‡‡< =
Mail
‡‡= A
.
‡‡A B
MailMessage
‡‡B M
(
‡‡M N
)
‡‡N O
;
‡‡O P
msg
·· 
.
·· 
To
·· 
.
·· 
Add
·· 
(
·· 
jugador
·· 
.
·· 
Correo
·· %
)
··% &
;
··& '
msg
‚‚ 
.
‚‚ 
From
‚‚ 
=
‚‚ 
new
‚‚ 
MailAddress
‚‚ &
(
‚‚& '
$str
‚‚' >
,
‚‚> ?
$str
‚‚@ Y
)
‚‚Y Z
;
‚‚Z [
msg
„„ 
.
„„ 
Subject
„„ 
=
„„ 
$str
„„ 2
;
„„2 3
msg
‰‰ 
.
‰‰ 
SubjectEncoding
‰‰ 
=
‰‰  !
System
‰‰" (
.
‰‰( )
Text
‰‰) -
.
‰‰- .
Encoding
‰‰. 6
.
‰‰6 7
UTF8
‰‰7 ;
;
‰‰; <
msg
ÂÂ 
.
ÂÂ 
Body
ÂÂ 
=
ÂÂ 
jugador
ÂÂ 
.
ÂÂ 
C√≥digo
ÂÂ %
;
ÂÂ% &
msg
ÊÊ 
.
ÊÊ 
BodyEncoding
ÊÊ 
=
ÊÊ 
System
ÊÊ %
.
ÊÊ% &
Text
ÊÊ& *
.
ÊÊ* +
Encoding
ÊÊ+ 3
.
ÊÊ3 4
UTF8
ÊÊ4 8
;
ÊÊ8 9
msg
ÁÁ 
.
ÁÁ 

IsBodyHtml
ÁÁ 
=
ÁÁ 
false
ÁÁ "
;
ÁÁ" #

SmtpClient
ÈÈ 
client
ÈÈ 
=
ÈÈ 
new
ÈÈ  #

SmtpClient
ÈÈ$ .
(
ÈÈ. /
)
ÈÈ/ 0
;
ÈÈ0 1
client
ÍÍ 
.
ÍÍ #
UseDefaultCredentials
ÍÍ (
=
ÍÍ) *
false
ÍÍ+ 0
;
ÍÍ0 1
client
ÎÎ 
.
ÎÎ 
Credentials
ÎÎ 
=
ÎÎ  
new
ÎÎ! $
System
ÎÎ% +
.
ÎÎ+ ,
Net
ÎÎ, /
.
ÎÎ/ 0
NetworkCredential
ÎÎ0 A
(
ÎÎA B
$str
ÎÎB Y
,
ÎÎY Z
$str
ÎÎ[ k
)
ÎÎk l
;
ÎÎl m
client
ÏÏ 
.
ÏÏ 
Port
ÏÏ 
=
ÏÏ 
$num
ÏÏ 
;
ÏÏ 
client
ÌÌ 
.
ÌÌ 
Host
ÌÌ 
=
ÌÌ 
$str
ÌÌ *
;
ÌÌ* +
client
ÓÓ 
.
ÓÓ 
DeliveryMethod
ÓÓ !
=
ÓÓ" # 
SmtpDeliveryMethod
ÓÓ$ 6
.
ÓÓ6 7
Network
ÓÓ7 >
;
ÓÓ> ?
client
ÔÔ 
.
ÔÔ 
	EnableSsl
ÔÔ 
=
ÔÔ 
true
ÔÔ #
;
ÔÔ# $
client
 
.
 
Send
 
(
 
msg
 
)
 
;
 
return
ÒÒ 
$num
ÒÒ 
;
ÒÒ 
}
ÚÚ 	
}
ÛÛ 
}ÙÙ Ì
XC:\Users\Muterk\Documents\Git-hub\Pacman-services\Server\Pacman-Sevices\ValidarCampos.cs
	namespace 	
Pacman_Sevices
 
{ 
public 

class 
ValidarCampos 
{ 
public 
enum !
ResultadosValidaci√≥n (
{		 	 
Contrase√±aInv√°lida

 
,

 
Contrase√±aV√°lida 
, 
Correoinv√°lido 
, 
CorreoV√°lido 
, 
UsernameInv√°lido 
, 
UsernameV√°lido 
, 
NombreV√°lido 
, 
NombreInv√°lido 
} 	
public !
ResultadosValidaci√≥n #
ValidarPassword$ 3
(3 4
string4 :
contrase√±a; E
)E F
{ 	
string 
patr√≥n 
= 
$str F
;F G
if 
( 
Regex 
. 
IsMatch 
( 
contrase√±a (
,( )
patr√≥n* 0
)0 1
)1 2
{ 
return   !
ResultadosValidaci√≥n   +
.  + ,
Contrase√±aV√°lida  , <
;  < =
}!! 
return"" !
ResultadosValidaci√≥n"" '
.""' ( 
Contrase√±aInv√°lida""( :
;"": ;
}$$ 	
public&& !
ResultadosValidaci√≥n&& #
ValidarCorreo&&$ 1
(&&1 2
string&&2 8
correo&&9 ?
)&&? @
{'' 	
string(( 
patr√≥n(( 
=(( 
$str(( O
;((O P
if)) 
()) 
Regex)) 
.)) 
IsMatch)) 
()) 
correo)) $
,))$ %
patr√≥n))& ,
))), -
)))- .
{** 
return++ !
ResultadosValidaci√≥n++ +
.+++ ,
CorreoV√°lido++, 8
;++8 9
},, 
return-- !
ResultadosValidaci√≥n-- '
.--' (
Correoinv√°lido--( 6
;--6 7
}.. 	
}00 
}11 